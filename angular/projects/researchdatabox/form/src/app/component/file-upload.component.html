@if (isVisible) {
  <ng-container *ngTemplateOutlet="getTemplateRef('before')" />

  @if (isEditMode()) {
    @if (isUploadEnabled()) {
      <div #dashboardHost class="rb-file-upload-dashboard"></div>
    } @else {
      <div class="alert alert-info py-2 px-3 mb-2">Save your record to attach files.</div>
    }
  }

  @if (attachments.length > 0) {
    <div class="rb-file-upload-list mt-2">
      <table class="table table-sm mb-0">
        <tbody>
          @for (attachment of attachments; track $index) {
            <tr>
              <td>
                @if (attachment.pending) {
                  <span>{{ attachment.name }}</span>
                } @else {
                  <a [href]="getLocationLink(attachment)" target="_blank" rel="noopener noreferrer">{{ attachment.name }}</a>
                }
                @if (attachment.notes) {
                  <div class="small text-muted">{{ attachment.notes }}</div>
                }
              </td>
              @if (isEditMode()) {
                <td class="text-end">
                  <button type="button" class="btn btn-outline-danger btn-sm" (click)="removeAttachment($index)" [disabled]="isDisabled || isReadonly">
                    Remove
                  </button>
                </td>
              }
            </tr>
          }
        </tbody>
      </table>
    </div>
  }

  <ng-container *ngTemplateOutlet="getTemplateRef('after')" />
}
