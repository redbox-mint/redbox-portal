<ng-container [ngSwitch]="formDefMap?.formConfig?.domElementType">
  <form *ngSwitchCase="'form'" [id]="formDefMap?.formConfig?.domId">
    <ng-container [ngTemplateOutlet]="compsTemplate"></ng-container>
  </form>
  <ng-container *ngSwitchDefault>
    <ng-container [ngTemplateOutlet]="compsTemplate"></ng-container>
  </ng-container>
</ng-container>
<ng-template #compsTemplate>
  <ng-container *ngFor="let component of components">
    <redbox-form-base-wrapper [model]="component.model"
                              [componentClass]="component.layoutClass || component.componentClass"
                              [formFieldCompMapEntry]="component"
                              [defaultComponentConfig]="formDefMap?.formConfig?.defaultComponentConfig"
                              (componentReady)="registerComponentReady(component)"></redbox-form-base-wrapper>
  </ng-container>
</ng-template>
<ng-container *ngIf="components.length > 0 && formDefMap?.formConfig?.debugValue">
  <div class="alert alert-info" role="alert">
    <h4>Form Component Debug</h4>
    <pre [innerHtml]="form?.value | json"></pre>
    <ul>
      <li>status: {{ status() }}</li>
      <li>componentsLoaded: {{ componentsLoaded() }}</li>
      <li>isReady: {{ isReady }}</li>
    </ul>
  </div>
</ng-container>
