version: 2
updates:

  # Update Dockerfile files
  - package-ecosystem: "docker"
    directory: "/"
    schedule:
      interval: "daily"
    target-branch: "develop"

  # Update docker compose files
  - package-ecosystem: "docker-compose"
    directories:
      - "/support/development"
      - "/support/integration-testing"
    schedule:
      interval: "daily"
    target-branch: "develop"

  # Update github actions files
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "daily"
    target-branch: "develop"

  # Update npm files
  - package-ecosystem: "npm"
    directories:
      - "/"
      - "/core"
      - "/support/build/api-descriptors"
      - "/support/raido"
    schedule:
      interval: "daily"
    target-branch: "develop"

  # Update npm files
  # Update angular dependencies as a group,
  #  with one PR having minor & patch changes,
  #  and separate PR for major version changes
  - package-ecosystem: "npm"
    directories:
      - "/angular"
      - "/angular/projects/researchdatabox/portal-ng-common"
    schedule:
      interval: "daily"
    target-branch: "develop"
    groups:
      angular:
        applies-to: "version-updates"
        patterns:
          - "@angular*"
          - "ngx-bootstrap"
          - "angular-i18next"
          - "@schematics/angular"
        update-types:
          - "minor"
          - "patch"
      angular-major:
        applies-to: "version-updates"
        patterns:
          - "@angular*"
          - "ngx-bootstrap"
          - "angular-i18next"
          - "@schematics/angular"
        update-types:
          - "major"

  - package-ecosystem: "npm"
    directory: "/angular-legacy"
    schedule:
      interval: "daily"
    target-branch: "develop"
    groups:
      angular-legacy:
        applies-to: "version-updates"
        patterns:
          - "@angular*"
        update-types:
          - "minor"
          - "patch"
      angular-legacy-major:
        applies-to: "version-updates"
        patterns:
          - "@angular*"
        update-types:
          - "major"
