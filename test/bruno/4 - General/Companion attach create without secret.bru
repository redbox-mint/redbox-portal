meta {
  name: Companion attach create without secret
  type: http
  seq: 3.9
}

post {
  url: {{host}}/default/rdmp/companion/record/pending-oid/attach
  body: none
  auth: none
}

headers {
  Origin: {{host}}
  Tus-Resumable: 1.0.0
  Upload-Length: 10
  Upload-Metadata: name Y29tcGFuaW9uLW5vLXNlY3JldC50eHQ=,type dGV4dC9wbGFpbg==
  Content-Length: 0
  Content-Type: application/x-www-form-urlencoded
}

tests {
  test("Unauthenticated requests without companion secret are rejected", function () {
    const status = res.getStatus();
    expect([302, 403]).to.include(status);
  });
}
