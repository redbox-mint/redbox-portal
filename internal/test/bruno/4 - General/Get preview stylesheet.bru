meta {
  name: Get preview stylesheet
  type: http
  seq: 6
}

get {
  url: {{host}}/default/rdmp/preview/{{preview_token}}.css
  body: none
  auth: none
}

script:pre-request {
  // For CI this assumes another step created {{preview_token}}
}

tests {
  test("Status code is 200", function () {
      expect(res.getStatus()).to.eql(200);
  });

  test("Caches preview ETag when 200", function(){
    const etag = res.getHeader("etag");
    expect(etag).to.exist;
    expect(etag).to.match(/^W\/\"preview-[a-f0-9]+\"$/);
    bru.setVar("preview_etag", etag);
  });
}
